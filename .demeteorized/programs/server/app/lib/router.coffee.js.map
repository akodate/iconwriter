{"version":3,"sources":["meteor://ðŸ’»app/lib/router.coffee"],"names":[],"mappings":"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","file":"/lib/router.coffee.js","sourcesContent":["Router.configure\n\n  layoutTemplate: 'layout',\n  loadingTemplate: 'loading'\n\n\n\nRouter.map( ->\n\n  @route(\"img\", {\n    path: \"/img/:path(*)\"\n    where: \"server\"\n    action: ->\n      console.log \"Time: \" + new Date()\n      console.log \"------------------------------------------------\"\n      console.log \"Request headers for img/:path(*): \"\n      console.log @request.headers\n      console.log \"------------------------------------------------\"\n      console.log \"cwd: \" + process.cwd()\n      fs = Npm.require(\"fs\")\n      path = decodeURIComponent('/' + @params.path)\n      if process.env.ROOT_URL != 'http://localhost:3000/'\n        basedir = fs.realpathSync(process.env.CLOUD_DIR + '/iconwriter/savedimg')\n      else\n        basedir = fs.realpathSync(process.env.PWD + '/public')\n      console.log \"Will serve static content at: \" + basedir + path\n      try\n        file = fs.readFileSync(basedir + path)\n      catch e\n        throw e\n      headers =\n        \"Content-type\": \"image/jpg\"\n        \"Content-Disposition\": \"attachment; filename=\" + path.slice(1)\n\n      @response.writeHead 200, headers\n      console.log 'Image route accessed'\n      return @response.end file\n  })\n  @route('homepage', {\n    path: '/',\n    render: 'home',\n    onAfterAction: ->\n      generateTable('iconwriter')\n      GAnalytics.pageview()\n  })\n  @route('url', {\n    path: '/-:extension',\n    waitOn: ->\n\n      $(\"meta[property='og:image']\").attr(\"content\", document.location.origin + '/img/' + encodeURIComponent @params.extension + '.jpg')\n      $(\"meta[property='og:type']\").attr(\"content\", \"iconwriter:icon_message\" )\n      $(\"meta[property='og:title']\").attr(\"content\", \"What does your name look like spelled with app icons?\")\n      $(\"meta[property='og:description']\").attr(\"content\", \"Write whatever you want on an iPhone home screen with IconWriter! A 20-icon love letter? An Android fanpost? Or maybe a nice home screen arrangement? There are over 100 icons to choose from!\")\n      $(\"meta[property='og:url']\").attr(\"content\", document.location.origin + '/-' + encodeURIComponent @params.extension)\n\n    onAfterAction: ->\n      generateTable(@params.extension)\n      GAnalytics.pageview()\n  })\n  @route('about', {\n    path: '/about',\n    onAfterAction: ->\n      GAnalytics.pageview()\n  })\n  @route('home', {\n    path: '/:input',\n    waitOn: ->\n      $(\"meta[name='twitter:card']\").attr(\"content\", \"summary_large_image\")\n      $(\"meta[name='twitter:title']\").attr(\"content\", \"What does your name look like spelled with app icons?\")\n      $(\"meta[name='twitter:description']\").attr(\"content\", \"Write whatever you want on an iPhone home screen with IconWriter! A 20-icon love letter? An Android fanpost? Or maybe a nice home screen arrangement? There are over 100 icons to choose from!\")\n      $(\"meta[name='twitter:image:src']\").attr(\"content\", document.location.origin + '/img/' + @params.input + '.jpg')\n    onAfterAction: ->\n      generateTable(@params.input)\n      GAnalytics.pageview()\n  })\n)\n\n\n\n# Router.onBeforeAction('loading')"]}